{"version":3,"sources":["components/StationModal.js","containers/Search.js","store/locationStore.js","images/logo.svg","images/ic-search.svg","images/ic-map-pin.svg","images/ic-alert.svg","images/ic-search-grey.svg","images/ic-bus-main.svg","images/empty-card.svg","images/dashed-line.svg","const.js","style.js","components/Menu.js","images/ic-point.svg","images/ic-map-marker.svg","images/ic-site.svg","images/ic-bus.svg","common.js","components/QuickSearch.js","components/SearchSelect.js","images/user-marker-point.svg","images/ic-close.svg","images/ic-map-marker-main.svg","components/Empty.js","containers/Nearby.js","containers/News.js","App.js","reportWebVitals.js","index.js"],"names":["map","LocationContext","createContext","useLocationStore","useContext","LocationContextProvider","children","React","useState","locationData","setLocationData","Provider","value","desktopMedia","styles","colors","directionText","E","W","S","N","SE","NE","SW","NW","statusMap","auth","process","cities","name","key","latlng","lat","lng","cityCodeMap","TPE","TXG","KEE","TNN","KHH","NWT","ILA","TAO","CYI","HSQ","MIA","NAN","CHA","HSZ","YUN","CYQ","PIF","HUA","TTT","KIN","PEN","LIE","Container","styled","div","PageWrapper","PageTitle","h1","SecondTitle","h2","ItemTitle","h3","TitleSplit","hr","Board","IconBtn","button","StripedList","ul","StopsStripedList","StopStatus","span","BusPlate","icBus","TabList","size","MenuWrapper","LinkLogo","Link","NavList","NavListItem","li","MenuLink","NavLink","Overlay","ModalWrapper","Modal","MapContainer","SearchInput","input","icSearch","DropdownWrapper","DropdownList","DropdownListItem","EmptyWrapper","emptyBg","EmptyText","TitleWithSearch","SearchWrapper","SearchCol1","SearchCol2","ClockText","SearchFieldWrapper","dashedBorder","SearchBtn","RouteMap","Menu","to","src","Logo","icMapPin","icAlert","useIsMobile","isMobileSize","setIsMobileSize","useEffect","window","autoResize","innerWidth","addEventListener","removeEventListener","genHMAC","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","HMAC","getHMAC","commonAxios","a","method","url","others","responseData","axios","responseType","headers","Authorization","data","console","log","useCurrentPosition","getPosition","navigator","geolocation","getCurrentPosition","res","coords","latitude","longitude","StyledSelect","navigate","useNavigate","options","setOptions","showDropdown","setShowDropdown","inputRef","useRef","root","document","getElementById","onOtherClick","e","target","current","length","ref","type","placeholder","onChange","keyword","then","n","RouteUID","label","RouteName","Zh_tw","sort","b","localeCompare","onFocus","opt","onClick","val","SearchSelect","onSelect","icon","defaultValue","inputValue","setInputValue","filterOptions","setFilterOptions","find","alt","filter","includes","autocomplete","option","StationModal","close","showUserPopup","modalRef","routeData","setRouteData","config","ele","PositionLat","PositionLon","mymap","L","setView","tileLayer","attribution","maxZoom","id","tileSize","zoomOffset","accessToken","addTo","marker","iconUrl","mapMarker","iconAnchor","popupAnchor","userMarker","bindPopup","openPopup","initMap","StationPosition","city","LocationCityCode","Promise","all","StationID","results","routes","realBusData","forEach","bus","routeIndex","findIndex","Direction","SubRouteUID","PlateNumb","estimateTime","EstimateTime","parseInt","status","getRouteData","remove","style","alignItems","offsetHeight","innerHeight","stopPropagation","icClose","width","height","minHeight","StationName","Bearing","marginBottom","StationAddress","route","Empty","text","NumberedIcon","Icon","extend","number","className","createIcon","createElement","innerHTML","this","_setIconStyles","BusIcon","plateNumb","img","setAttribute","appendChild","append","busLayer","layerGroup","stopsLayer","Search","useParams","urlCity","urlRoute","clock","setClock","filterConfig","setFilterConfig","routeOptions","setRouteOptions","activeBus","setActiveBus","dynamicStopsList","setDynamicStopsList","currentRoute","setCurrentRoute","stopsList","setStopsList","routeShape","setRouteShape","modalInfo","setModalInfo","activeList","setActiveList","isMobile","getDynamicData","list","routeRealPoint","routeRealNearStop","estimatedArrival","mergeList","subRouteIndex","Stops","StopSequence","busStatus","DutyStatus","stop","stopIndex","StopUID","openModal","stopData","getStopInfo","substr","stationCity","moment","format","timer","setInterval","clearInterval","routeInfos","routeStops","shapes","routeInfo","subRoutes","destination","DestinationStopNameZh","DepartureStopNameZh","Geometry","i","wkt","lineData","GeoJSON","coordsToLatLngs","parseWKT","coordinates","l","polyline","color","bounds","getBounds","center","getCenter","fitBounds","initBasicMap","refreshData","points","clearLayers","BusPosition","Speed","s","StopPosition","StopName","currentCity","City","QuickSearch","padding","overflow","fontFamily","fontSize","v","icPoint","icMapMarker","verticalAlign","marginRight","icSite","StopID","Nearby","currentDistance","setCurrentDistance","setData","distance","arr","x","getNearStations","marginTop","info","preventDefault","showModal","join","StationUID","News","targetCity","setTargetCity","closeModal","justifyContent","PublishTime","Title","Department","Description","Layout","App","path","element","index","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b71d5070.chunk.js","sourcesContent":["import React from 'react';\r\nimport L from 'leaflet';\r\nimport { useLocationStore } from '@/store/locationStore';\r\nimport { auth, directionText, cityCodeMap, statusMap } from \"@/const\";\r\nimport userMarker from \"@/images/user-marker-point.svg\";\r\nimport icClose from \"@/images/ic-close.svg\";\r\nimport mapMarker from \"@/images/ic-map-marker-main.svg\";\r\nimport {commonAxios} from \"@/common\";\r\nimport {ItemTitle, Overlay, ModalWrapper, Modal, MapContainer, IconBtn,\r\n  SearchWrapper, SearchCol1, SearchCol2, StopsStripedList, StopStatus, BusPlate} from '@/style';\r\n\r\nlet map;\r\n\r\nconst StationModal = ({data, close, showUserPopup}) => {\r\n  const ref = React.useRef(null);\r\n  const modalRef = React.useRef(null);\r\n  const {locationData} = useLocationStore();\r\n  const [routeData, setRouteData] = React.useState([]);\r\n\r\n  const getRouteData = () => {\r\n    const city = cityCodeMap[data.LocationCityCode];\r\n\r\n    Promise.all([\r\n      commonAxios({\r\n        url: `/v2/Bus/EstimatedTimeOfArrival/City/${city}/PassThrough/Station/${data.StationID}?`,\r\n      }),\r\n      commonAxios({\r\n        url: `/v2/Bus/RealTimeNearStop/City/${city}/PassThrough/Station/${data.StationID}?`,\r\n      })\r\n    ]).then((results) => {\r\n      const [routes, realBusData] = results;\r\n      if (realBusData.length > 0) {\r\n        realBusData.forEach((bus) => {\r\n          const routeIndex = routes.findIndex((n) => n.Direction === bus.Direction && n.SubRouteUID === bus.SubRouteUID);\r\n          if (routeIndex > -1) {\r\n            routes[routeIndex].BusPlate = bus.PlateNumb;\r\n          }\r\n        });\r\n      }\r\n      setRouteData(routes.map((n) => {\r\n        const estimateTime = n.EstimateTime ? parseInt(n.EstimateTime/60) : 0;\r\n        if (!n.StopStatus || n.BusPlate) {\r\n          return {...n, status: `${estimateTime > 1 ? `約${estimateTime}分` : '進站中'}`}\r\n        }\r\n        return {...n, status: statusMap[n.StopStatus]};\r\n      }));\r\n    });\r\n  };\r\n  const initMap = (config, ele) => {\r\n    const { PositionLat: lat, PositionLon: lng } = config;\r\n    const mymap = L.map(ele).setView([lat, lng], 15);\r\n  \r\n    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n      maxZoom: 18,\r\n      id: 'allychen/ckw5waap41dl514o4rcpa1nsn',\r\n      tileSize: 512,\r\n      zoomOffset: -1,\r\n      accessToken: auth.mapBoxToken\r\n    }).addTo(mymap);\r\n\r\n    L.marker([lat, lng], {\r\n      icon: L.icon({\r\n        iconUrl: mapMarker,\r\n        iconAnchor: [10, 23],\r\n        popupAnchor: [0, -23]\r\n      })\r\n    }).addTo(mymap);\r\n    // L.marker([lat, lng]).addTo(mymap);\r\n    if (locationData) {\r\n      const current = L.marker([locationData.lat, locationData.lng], {\r\n        icon: L.icon({\r\n          iconUrl: userMarker,\r\n          iconAnchor: [7, 8],\r\n          popupAnchor: [0, -6]\r\n        })\r\n      }).addTo(mymap);\r\n      if (showUserPopup) {\r\n        current.bindPopup('目前位置').openPopup();\r\n      }\r\n    }\r\n  \r\n    return mymap;\r\n  };\r\n  React.useEffect(() => {\r\n    map = initMap(data.StationPosition, ref.current);\r\n    getRouteData();\r\n    return () => {\r\n      map.remove();\r\n    }\r\n  }, []);\r\n  return (\r\n    <Overlay onClick={close}>\r\n      <ModalWrapper style={{alignItems: modalRef.current?.offsetHeight < window.innerHeight ? 'center' : 'baseline'}}>\r\n        <Modal ref={modalRef} onClick={(e) => e.stopPropagation()}>\r\n          <IconBtn onClick={close} type=\"button\"><img src={icClose} alt=\"x\" width=\"20\" /></IconBtn>\r\n          <SearchWrapper style={{height: 'auto', minHeight: 'auto'}}>\r\n            <SearchCol1>\r\n              <ItemTitle>{data.StationName.Zh_tw} - {directionText[data.Bearing]}</ItemTitle>\r\n              <small style={{marginBottom: 12}}>{data.StationAddress}</small>\r\n              <StopsStripedList>\r\n                {routeData.map((route) => (\r\n                  <li key={route.RouteUID}>\r\n                    <span>{route.RouteName.Zh_tw}</span>\r\n                    <StopStatus>{route.status}</StopStatus>\r\n                    {route.BusPlate && <BusPlate>{route.BusPlate}</BusPlate>}\r\n                  </li>\r\n                ))}\r\n              </StopsStripedList>\r\n            </SearchCol1>\r\n            <SearchCol2>\r\n              <MapContainer ref={ref} />\r\n            </SearchCol2>\r\n          </SearchWrapper>\r\n        </Modal>\r\n      </ModalWrapper>\r\n    </Overlay>\r\n  );\r\n};\r\n\r\nexport default StationModal;","import React from 'react';\r\nimport L from 'leaflet';\r\nimport parseWKT from 'wellknown';\r\nimport { useParams, useNavigate } from 'react-router';\r\nimport icPoint from '@/images/ic-point.svg';\r\nimport icMapMarker from '@/images/ic-map-marker.svg';\r\nimport icSite from '@/images/ic-site.svg';\r\nimport icBus from '@/images/ic-bus.svg';\r\nimport QuickSearch from '@/components/QuickSearch';\r\nimport SearchSelect from '@/components/SearchSelect';\r\nimport StationModal from \"@/components/StationModal\";\r\nimport Empty from \"@/components/Empty\";\r\nimport {PageTitle, TitleSplit, TitleWithSearch, Board, SecondTitle, RouteMap,\r\n  SearchWrapper, SearchCol1, SearchCol2, ClockText, TabList, StopsStripedList, StopStatus, BusPlate, SearchBtn, IconBtn} from '@/style';\r\nimport {commonAxios, useIsMobile, useCurrentPosition} from '@/common';\r\nimport {auth, colors, cities, statusMap, cityCodeMap} from '@/const';\r\nimport moment from 'moment';\r\n\r\nL.NumberedIcon = L.Icon.extend({\r\n\toptions: {\r\n    number: '',\r\n    className: 'icon-number',\r\n    iconAnchor: [12, 12],\r\n    popupAnchor: [0, -12]\r\n\t},\r\n\r\n\tcreateIcon: function () {\r\n\t\tvar div = document.createElement('div');\r\n\t\tdiv.innerHTML = this.options['number'] || '';\r\n\t\tthis._setIconStyles(div, 'icon');\r\n\t\treturn div;\r\n\t},\r\n});\r\n\r\nL.BusIcon = L.Icon.extend({\r\n\toptions: {\r\n    plateNumb: '',\r\n    className: 'icon-bus',\r\n    iconAnchor: [36, 18],\r\n    popupAnchor: [0, -18]\r\n\t},\r\n\r\n\tcreateIcon: function () {\r\n\t\tvar div = document.createElement('div');\r\n    var img = document.createElement('img');\r\n    img.setAttribute('src', icBus);\r\n    div.appendChild(img);\r\n    div.append(this.options['plateNumb'] || '');\r\n\t\tthis._setIconStyles(div, 'icon');\r\n\t\treturn div;\r\n\t},\r\n});\r\n\r\nlet map;\r\nlet busLayer = L.layerGroup();\r\nlet stopsLayer = L.layerGroup();\r\n\r\nconst initActiveBus = (points) => {\r\n  busLayer.clearLayers();\r\n  points.forEach((bus, i) => {\r\n    const { PositionLat, PositionLon } = bus.BusPosition;\r\n    const marker = L.marker([PositionLat, PositionLon], {\r\n      icon: new L.BusIcon({plateNumb: bus.PlateNumb})\r\n    }).addTo(busLayer);\r\n    marker.bindPopup(`${bus.Speed} kph`);\r\n  });\r\n  busLayer.addTo(map);\r\n};\r\n\r\nconst initStops = (points) => {\r\n  stopsLayer.clearLayers();\r\n  points.forEach((s, i) => {\r\n    const { PositionLat, PositionLon } = s.StopPosition;\r\n    const marker = L.marker([PositionLat, PositionLon], {\r\n      icon: new L.NumberedIcon({number: s.StopSequence})\r\n    }).addTo(stopsLayer);\r\n    marker.bindPopup(s.StopName.Zh_tw);\r\n  });\r\n  stopsLayer.addTo(map);\r\n};\r\n\r\nconst initMap = (ele, wkt) => {\r\n  const lineData = L.GeoJSON.coordsToLatLngs(parseWKT(wkt).coordinates);\r\n  const l = L.polyline(lineData, {color: colors.light});\r\n  const bounds = l.getBounds();\r\n  const center = bounds.getCenter();\r\n  const mymap = L.map(ele).setView([center.lat, center.lng], 15);\r\n  L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n    attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n    maxZoom: 18,\r\n    id: 'allychen/ckw5waap41dl514o4rcpa1nsn',\r\n    tileSize: 512,\r\n    zoomOffset: -1,\r\n    accessToken: auth.mapBoxToken\r\n  }).addTo(mymap);\r\n  l.addTo(mymap);\r\n\r\n  mymap.fitBounds(bounds);\r\n  return mymap;\r\n};\r\n\r\nconst initBasicMap = (ele, center) => {\r\n  const mymap = L.map(ele).setView([center ? center.lat : 25.04454809288478, center ? center.lng : 121.53947779457634], 13);\r\n  L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n    attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n    maxZoom: 18,\r\n    id: 'allychen/ckw5waap41dl514o4rcpa1nsn',\r\n    tileSize: 512,\r\n    zoomOffset: -1,\r\n    accessToken: auth.mapBoxToken\r\n  }).addTo(mymap);\r\n\r\n  return mymap;\r\n};\r\nconst Search = () => {\r\n  const { locationData, getPosition } = useCurrentPosition();\r\n  const ref = React.useRef();\r\n  const navigate = useNavigate();\r\n  const {city: urlCity, route: urlRoute} = useParams();\r\n  const [clock, setClock] = React.useState('');\r\n  const [filterConfig, setFilterConfig] = React.useState(null);\r\n  const [routeOptions, setRouteOptions] = React.useState([]);\r\n  const [activeBus, setActiveBus] = React.useState([]);\r\n  const [dynamicStopsList, setDynamicStopsList] = React.useState([]);\r\n  const [currentRoute, setCurrentRoute] = React.useState(null);\r\n  const [stopsList, setStopsList] = React.useState([]);\r\n  const [routeShape, setRouteShape] = React.useState('');\r\n  const [modalInfo, setModalInfo] = React.useState(null);\r\n  const [activeList, setActiveList] = React.useState(0);\r\n  const isMobile = useIsMobile();\r\n\r\n  const getDynamicData = (city, route, list) => {\r\n    Promise.all([\r\n      commonAxios({\r\n        url: `/v2/Bus/RealTimeByFrequency/City/${city}?$filter=RouteUID eq '${route}'`,\r\n      }),\r\n      commonAxios({\r\n        url: `/v2/Bus/RealTimeNearStop/City/${city}?$filter=RouteUID eq '${route}'`,\r\n      }),\r\n      commonAxios({\r\n        url: `/v2/Bus/EstimatedTimeOfArrival/City/${city}?$filter=RouteUID eq '${route}'`,\r\n      }),\r\n    ]).then((results) => {\r\n      const [routeRealPoint, routeRealNearStop, estimatedArrival] = results;\r\n\r\n      const mergeList = [...list];\r\n\r\n      if (routeRealNearStop.length > 0) {\r\n        routeRealNearStop.forEach((bus) => {\r\n          const subRouteIndex = mergeList.findIndex((n) => n.Direction === bus.Direction && n.SubRouteUID === bus.SubRouteUID);\r\n          if (subRouteIndex > -1) {\r\n            mergeList[subRouteIndex].Stops[bus.StopSequence - 1].BusPlate = bus.PlateNumb;\r\n            mergeList[subRouteIndex].Stops[bus.StopSequence - 1].busStatus = bus.DutyStatus;\r\n          }\r\n        });\r\n      }\r\n      estimatedArrival.forEach((stop) => {\r\n        const estimateTime = stop.EstimateTime ? parseInt(stop.EstimateTime/60) : 0;\r\n        const subRouteIndex = mergeList.findIndex((n) => (stop.Direction === 255 && n.SubRouteUID === stop.SubRouteUID) ||\r\n        (n.Direction === stop.Direction && n.RouteUID === stop.RouteUID));\r\n\r\n        const stopIndex = mergeList[subRouteIndex]?.Stops.findIndex((n) => n.StopUID === stop.StopUID);\r\n        if (stopIndex > -1) {\r\n          mergeList[subRouteIndex].Stops[stopIndex].status = stop.StopStatus ? statusMap[stop.StopStatus]\r\n          : `${estimateTime > 1 ? `約${estimateTime}分` : '進站中'}`;\r\n        }\r\n        if (mergeList[subRouteIndex]?.Stops[stopIndex]?.busStatus === 1) {\r\n          mergeList[subRouteIndex].Stops[stopIndex].status = '進站中';\r\n        }\r\n      });\r\n\r\n      setActiveBus(routeRealPoint);\r\n      setDynamicStopsList(mergeList);\r\n    })\r\n  };\r\n\r\n  const getStaticData = (city, route) => {\r\n    Promise.all([\r\n      commonAxios({\r\n        url: `/v2/Bus/Route/City/${city}?$filter=RouteUID eq '${route}'`,\r\n      }),\r\n      commonAxios({\r\n        url: `/v2/Bus/StopOfRoute/City/${city}?$filter=RouteUID eq '${route}'`,\r\n      }),\r\n      commonAxios({\r\n        url: `/v2/Bus/Shape/City/${city}?$filter=RouteUID eq '${route}'`,\r\n      })\r\n    ]).then((results) => {\r\n      const [routeInfos, routeStops, shapes] = results;\r\n      const routeInfo = routeInfos[0];\r\n\r\n      const subRoutes = routeStops.map((n) => ({\r\n        ...n,\r\n        destination: n.Direction === 0 ? routeInfo.DestinationStopNameZh : routeInfo.DepartureStopNameZh\r\n      }));\r\n      setCurrentRoute(routeInfo);\r\n      setRouteShape(shapes[0].Geometry);\r\n      setStopsList(subRoutes.filter((n, i) => i < 2));\r\n    });\r\n  };\r\n\r\n  const onSearch = () => {\r\n    const {city, route} = filterConfig;\r\n    navigate(`/search/${city}/${route}`);\r\n  };\r\n\r\n  const onSelectCity = (city) => {\r\n    setFilterConfig({...filterConfig, city});\r\n    commonAxios({\r\n      url: `/v2/Bus/Route/City/${city}?`,\r\n    }).then((res) => {\r\n      setRouteOptions(res?.map((n) => ({value: n.RouteUID, label: n.RouteName.Zh_tw})).sort((a, b) => a.label.localeCompare(b.label)));\r\n    });\r\n  };\r\n\r\n  const OnTabClick = (key) => {\r\n    setActiveList(key);\r\n  };\r\n\r\n  const getStopInfo = (city, id) => {\r\n    return commonAxios({\r\n      url: `/v2/Bus/Stop/City/${city}?$filter=StopUID eq '${id}'&`,\r\n    });\r\n  };\r\n\r\n  const openModal = (stopData) => {\r\n    const city = cityCodeMap[stopData.StopUID.substr(0, 3)];\r\n    getStopInfo(city, stopData.StopUID).then((res) => {\r\n      const stationCity = cityCodeMap[res[0].LocationCityCode];\r\n      commonAxios({\r\n        url: `/v2/Bus/Station/City/${stationCity}?$filter=StationID eq '${res[0].StationID}'&`,\r\n      }).then((res) => {\r\n        setModalInfo(res[0]);\r\n      })\r\n    });\r\n\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalInfo(null);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!clock) {\r\n      setClock(moment(new Date()).format('HH:mm'));\r\n    }\r\n    const timer = setInterval(() => {\r\n      setClock(moment(new Date()).format('HH:mm'));\r\n    }, 2000);\r\n    return () => {\r\n      clearInterval(timer);\r\n    }\r\n  }, [clock]);\r\n\r\n // 依url取得靜態站點資料\r\n  React.useEffect(() => {\r\n    if (urlCity && urlRoute) {\r\n      getStaticData(urlCity, urlRoute);\r\n    } else {\r\n      setCurrentRoute(null);\r\n      setRouteShape('');\r\n      setStopsList([]);\r\n    }\r\n  }, [urlCity, urlRoute]);\r\n\r\n // 取得站點資料後再取得動態資料\r\n  React.useEffect(() => {\r\n    if (stopsList.length > 0) {\r\n      getDynamicData(urlCity, urlRoute, stopsList);\r\n    }\r\n  }, [stopsList]);\r\n\r\n  // 取得路線資料後繪製圖片\r\n   React.useEffect(() => {\r\n     if (routeShape) {\r\n       map = initMap(ref.current, routeShape);\r\n     }\r\n     if (!routeShape && locationData) {\r\n       map = initBasicMap(ref.current, locationData);\r\n     }\r\n     return () => {\r\n       if (map) {\r\n        map.remove();\r\n       }\r\n     }\r\n   }, [routeShape, locationData]);\r\n\r\n  // 有動態資料時設定interval\r\n  React.useEffect(() => {\r\n    let timer;\r\n    if (activeBus.length > 0) {\r\n      const refreshData = () => {\r\n        getDynamicData(urlCity, urlRoute, stopsList);\r\n        if (activeBus.map((n) => n.Direction).includes(activeList)) {\r\n          initActiveBus(activeBus.filter((n) => n.Direction === activeList));\r\n        }\r\n      };\r\n      refreshData();\r\n      timer = setInterval(refreshData, 10000);\r\n    }\r\n    return () => {\r\n      clearInterval(timer);\r\n    }\r\n  }, [activeBus, activeList]);\r\n\r\n  // 切換tab時重繪站點\r\n  React.useEffect(() => {\r\n    if (stopsList.length > 0) {\r\n      initStops(stopsList[activeList].Stops);\r\n    }\r\n  }, [activeList, stopsList]);\r\n\r\n  React.useEffect(() => {\r\n    if (!urlCity && !urlRoute) {\r\n      getPosition();\r\n    }\r\n  }, []);\r\n\r\n  const currentCity = cities.find((n) => n.key === currentRoute?.City)?.name;\r\n\r\n  return (\r\n    <>\r\n      <TitleWithSearch>\r\n        <QuickSearch />\r\n        <PageTitle>Route Search <TitleSplit /> {currentRoute ? `${currentCity} - ${currentRoute.RouteName.Zh_tw}` : ' 路線搜尋 '}</PageTitle>\r\n      </TitleWithSearch>\r\n      <SearchWrapper>\r\n        <SearchCol1>\r\n          <div>\r\n            <Board style={{padding: isMobile ? '30px 30px 20px' : '40px 30px 30px', overflow: 'visible'}}>\r\n              <SecondTitle style={{fontFamily: 'DM Sans, Roboto, sans-serif', fontSize: 24, marginBottom: '0.5em'}}>Where are you going?</SecondTitle>\r\n              <SearchSelect\r\n                options={cities.map((n) => ({label: n.name, value: n.key}))}\r\n                placeholder=\"選擇 縣市\"\r\n                onSelect={(v) => onSelectCity(v)}\r\n                icon={icPoint}\r\n              />\r\n              <SearchSelect\r\n                options={routeOptions}\r\n                placeholder=\"選擇 路線\"\r\n                onSelect={(v) => setFilterConfig({...filterConfig, route: v})}\r\n                icon={icMapMarker}\r\n              />\r\n              <SearchBtn onClick={onSearch} type=\"button\">搜尋</SearchBtn>\r\n            </Board>\r\n          </div>\r\n          {isMobile && (<RouteMap ref={ref} style={{marginBottom: 28}} />)}\r\n          <div>\r\n            {urlCity && urlRoute ? (\r\n              <Board>\r\n                <TabList size=\"small\">\r\n                  {stopsList.map((list, i) => (\r\n                    <li key={`${list.Direction}-${list.SubRouteUID}`} className={activeList === i ? 'active' : ''} onClick={() => OnTabClick(i)}>\r\n                      往 {list?.destination}\r\n                    </li>\r\n                  ))}\r\n                </TabList>\r\n                <StopsStripedList>\r\n                  {dynamicStopsList[activeList]?.Stops.map((stop) => (\r\n                    <li key={stop.StopID}>\r\n                      <div>\r\n                        <IconBtn type=\"button\" onClick={() => openModal(stop)} style={{verticalAlign: -2, marginRight: 6}}>\r\n                          <img src={icSite} alt=\"\" />\r\n                        </IconBtn>\r\n                        {stop.StopName.Zh_tw}\r\n                      </div>\r\n                      <StopStatus>{stop.status}</StopStatus>\r\n                      {stop.BusPlate && <BusPlate>{stop.BusPlate}</BusPlate>}\r\n                    </li>\r\n                  ))}\r\n                </StopsStripedList>\r\n              </Board>\r\n            ) : (\r\n              <Board>\r\n                <Empty text=\"您還沒輸入路線資訊喔！\" />\r\n                <ClockText>{clock}</ClockText>\r\n              </Board>\r\n            )}\r\n          </div>\r\n        </SearchCol1>\r\n       {!isMobile && (\r\n          <SearchCol2>\r\n            <RouteMap ref={ref} />\r\n          </SearchCol2>\r\n        )}\r\n        {modalInfo && (\r\n          <StationModal data={modalInfo} close={closeModal} />\r\n        )}\r\n      </SearchWrapper>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Search;","import React, { createContext, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const LocationContext = createContext();\r\n\r\nexport const useLocationStore = () => useContext(LocationContext);\r\n\r\nexport const LocationContextProvider = ({ children }) => {\r\n  const [locationData, setLocationData] = React.useState(null);\r\n\r\n  return (\r\n    <LocationContext.Provider\r\n      value={{\r\n        locationData,\r\n        setLocationData,\r\n      }}\r\n    >\r\n      {children}\r\n    </LocationContext.Provider>\r\n  );\r\n};\r\n\r\nLocationContextProvider.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logo.3b870a01.svg\";","export default __webpack_public_path__ + \"static/media/ic-search.0c43b694.svg\";","export default __webpack_public_path__ + \"static/media/ic-map-pin.1994c556.svg\";","export default __webpack_public_path__ + \"static/media/ic-alert.f55b1580.svg\";","export default __webpack_public_path__ + \"static/media/ic-search-grey.fb4fa4f6.svg\";","export default __webpack_public_path__ + \"static/media/ic-bus-main.8cadc9e9.svg\";","export default __webpack_public_path__ + \"static/media/empty-card.a6a0934c.svg\";","export default __webpack_public_path__ + \"static/media/dashed-line.fcf5307b.svg\";","export const apiRoot = 'https://ptx.transportdata.tw/MOTC';\r\nexport const desktopMedia = (styles) => (`@media (min-width: 1024px){${styles}}`);\r\n\r\nexport const colors = {\r\n  main: '#0077FF',\r\n  mainLight: '#ECEEFF',\r\n  secondary: '#FFC44E',\r\n  dark: '#1E222B',\r\n  tint: '#99BADD',\r\n  light: '#486AE8',\r\n  textDark: '#363636',\r\n  textMedium: '#7D7D7D',\r\n  textLight: '#B6B6B6',\r\n  textLighter: '#D9D9D9',\r\n};\r\n\r\nexport const directionText = {\r\n  E:'東行', W:'西行', S:'南行', N:'北行', SE:'東南行', NE:'東北行', SW:'西南行', NW:'西北行'\r\n};\r\n\r\nexport const statusMap = {0:'正常',1:'尚未發車',2:'交管不停靠',3:'末班車已過',4:'今日未營運'};\r\n\r\nexport const auth = {\r\n  id: process.env.REACT_APP_TDXID,\r\n  key: process.env.REACT_APP_TDXKEY,\r\n  gMapKey: process.env.REACT_APP_GMAPKEY,\r\n  mapBoxToken: process.env.REACT_APP_MAPBOXTOKEN\r\n};\r\n\r\nexport const cities = [\r\n  {\r\n    name: '臺北市',\r\n    key: 'Taipei',\r\n    latlng: {lat: 25.04454809288478, lng: 121.53947779457634}\r\n  },\r\n  {\r\n    name: '新北市',\r\n    key: 'NewTaipei',\r\n    latlng: {lng: 121.4627838, lat: 25.0170177}\r\n  },\r\n  {\r\n    name: '桃園市',\r\n    key: 'Taoyuan',\r\n    latlng: {lng: 121.3009071, lat: 24.993682}\r\n  },\r\n  {\r\n    name: '臺中市',\r\n    key: 'Taichung',\r\n    latlng: {lng: 120.6736565, lat: 24.1477718}\r\n  },\r\n  {\r\n    name: '臺南市',\r\n    key: 'Tainan',\r\n    latlng: {lng: 120.2268219, lat: 22.9997997}\r\n  },\r\n  {\r\n    name: '高雄市',\r\n    key: 'Kaohsiung',\r\n    latlng: {lng: 120.3014088, lat: 22.6272419}\r\n  },\r\n  {\r\n    name: '基隆市',\r\n    key: 'Keelung',\r\n    latlng: {lng: 121.7391586, lat: 25.1275685}\r\n  },\r\n  {\r\n    name: '新竹市',\r\n    key: 'Hsinchu',\r\n    latlng: {lng: 120.9674549, lat: 24.813849}\r\n  },\r\n  {\r\n    name: '新竹縣',\r\n    key: 'HsinchuCounty',\r\n    latlng: {lng: 121.0177517, lat: 24.8386986}\r\n  },\r\n  {\r\n    name: '苗栗縣',\r\n    key: 'MiaoliCounty',\r\n    latlng: {lng: 120.8214569, lat: 24.5602388}\r\n  },\r\n  {\r\n    name: '彰化縣',\r\n    key: 'ChanghuaCounty',\r\n    latlng: {lng: 120.5161572, lat: 24.0517939}\r\n  },\r\n  {\r\n    name: '南投縣',\r\n    key: 'NantouCounty',\r\n    latlng: {lng: 120.9718323, lat: 23.9608425}\r\n  },\r\n  {\r\n    name: '雲林縣',\r\n    key: 'YunlinCounty',\r\n    latlng: {lng: 120.4313564, lat: 23.7092168}\r\n  },\r\n  {\r\n    name: '嘉義縣',\r\n    key: 'ChiayiCounty',\r\n    latlng: {lng: 120.2554893, lat: 23.4518294}\r\n  },\r\n  {\r\n    name: '嘉義市',\r\n    key: 'Chiayi',\r\n    latlng: {lng: 120.4491234, lat: 23.4800943}\r\n  },\r\n  {\r\n    name: '屏東縣',\r\n    key: 'PingtungCounty',\r\n    latlng: {lng: 120.5488586, lat: 22.5518792}\r\n  },\r\n  {\r\n    name: '宜蘭縣',\r\n    key: 'YilanCounty',\r\n    latlng: {lng: 121.7537498, lat: 24.7591271}\r\n  },\r\n  {\r\n    name: '花蓮縣',\r\n    key: 'HualienCounty',\r\n    latlng: {lng: 121.601572, lat: 23.9871544}\r\n  },\r\n  {\r\n    name: '臺東縣',\r\n    key: 'TaitungCounty',\r\n    latlng: {lng: 121.1438155, lat: 22.7613225}\r\n  },\r\n  {\r\n    name: '金門縣',\r\n    key: 'KinmenCounty',\r\n    latlng: {lng: 118.3766556, lat: 24.4493374}\r\n  },\r\n  {\r\n    name: '澎湖縣',\r\n    key: 'PenghuCounty',\r\n    latlng: {lng: 119.5793152, lat: 23.5712249}\r\n  },\r\n  {\r\n    name: '連江縣',\r\n    key: 'LienchiangCounty',\r\n    latlng: {lng: 119.9516487, lat: 26.1602145}\r\n  },\r\n];\r\n\r\nexport const cityCodeMap = {\r\n  TPE: 'Taipei',\r\n  TXG: 'Taichung',\r\n  KEE: 'Keelung',\r\n  TNN: 'Tainan',\r\n  KHH: 'Kaohsiung',\r\n  NWT: 'NewTaipei',\r\n  ILA: 'YilanCounty',\r\n  TAO: 'Taoyuan',\r\n  CYI: 'Chiayi',\r\n  HSQ: 'HsinchuCounty',\r\n  MIA: 'MiaoliCounty',\r\n  NAN: 'NantouCounty',\r\n  CHA: 'ChanghuaCounty',\r\n  HSZ: 'Hsinchu',\r\n  YUN: 'YunlinCounty',\r\n  CYQ: 'ChiayiCounty',\r\n  PIF: 'PingtungCounty',\r\n  HUA: 'HualienCounty',\r\n  TTT: 'TaitungCounty',\r\n  KIN: 'KinmenCounty',\r\n  PEN: 'PenghuCounty',\r\n  LIE: 'LienchiangCounty',\r\n};","import styled from 'styled-components';\r\nimport icSearch from '@/images/ic-search-grey.svg';\r\nimport icBus from '@/images/ic-bus-main.svg';\r\nimport emptyBg from '@/images/empty-card.svg';\r\nimport dashedBorder from '@/images/dashed-line.svg';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { colors, desktopMedia } from '@/const';\r\n\r\n// Common\r\n\r\nexport const Container = styled.div`\r\nmin-height: 100vh;\r\n${desktopMedia(`\r\ndisplay: flex;\r\n`)}\r\n`;\r\n\r\nexport const PageWrapper = styled.div`\r\npadding: 25px 26px 40px;\r\nflex: 1;\r\n${desktopMedia(`\r\npadding: 46px 82px 67px;\r\nmax-height: 100vh;\r\noverflow-y: scroll;\r\n&::-webkit-scrollbar {\r\n  width: 12px;\r\n}\r\n&::-webkit-scrollbar-thumb {\r\n  border-radius: 8px;\r\n  background: rgba(72,106,232,0.5);\r\n  border: 2px solid #F5F6FF;\r\n}\r\n`)}\r\n`;\r\n\r\nexport const PageTitle = styled.h1`\r\nfont-size: 16px;\r\ntext-transform: uppercase;\r\ncolor: var(--light);\r\nwidth: 100%;\r\n${desktopMedia(`\r\nfont-size: 26px;\r\nletter-spacing: 1.5px;\r\nwidth: auto;\r\n`)}`;\r\n\r\nexport const SecondTitle = styled.h2`\r\nfont-size: 20px;\r\ncolor: var(--text-medium);\r\nmargin-bottom: 1.5em;\r\n`;\r\n\r\nexport const ItemTitle = styled.h3`\r\ncolor: var(--light);\r\nfont-size: 18px;\r\nmargin-bottom: 0.5em;\r\n`;\r\n\r\nexport const TitleSplit = styled.hr`\r\nborder: 0;\r\nmargin: 0 0.5em;\r\nborder-right: 2px solid var(--light);\r\ndisplay: inline-block;\r\nvertical-align: -2px;\r\nheight: 0.8em;\r\n${desktopMedia(`\r\nborder-right-width: 3px;\r\n`)}\r\n`\r\n\r\nexport const Board = styled.div`\r\nposition: relative;\r\nbackground: #FFFFFF;\r\nbox-shadow: 2px 4px 7px rgba(196, 196, 196, 0.11);\r\nborder-radius: 16px;\r\noverflow: hidden;\r\n`;\r\n\r\nexport const IconBtn = styled.button`\r\nborder: 0;\r\nbackground: none;\r\npadding: 0;\r\noutline: 0;\r\ncursor: pointer;\r\n&:hover {\r\n  opacity: 0.7\r\n}\r\n`;\r\n\r\nexport const StripedList = styled.ul`\r\n> li {\r\n  line-height: 1.7;\r\n  > a {\r\n    display: block;\r\n    padding: 24px 20px;\r\n    font-weight: 500;\r\n    color: var(--text-medium);\r\n    font-size: 14px;\r\n    ${desktopMedia(`\r\n      padding: 24px 70px;\r\n      font-size: 18px;\r\n    `)}\r\n  }\r\n  &:nth-child(odd) {\r\n    background: #F6F7FF;\r\n  }\r\n  &:nth-child(even) {\r\n    background: #ECEEFF;\r\n  }\r\n   + li {\r\n    margin-top: 2px;\r\n  }\r\n}\r\nmax-height: calc(100vh - 380px);\r\noverflow-y: scroll;\r\n&::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n&::-webkit-scrollbar-track {\r\n  background: #F6F7FF;\r\n}\r\n&::-webkit-scrollbar-thumb {\r\n  background: var(--light);\r\n  border-radius: 6px;\r\n  &:hover {\r\n    background: var(--tint);\r\n  }\r\n}\r\n`;\r\n\r\nexport const StopsStripedList = styled.ul`\r\nmax-height: calc(100% - 40px);\r\noverflow-y: scroll;\r\n&::-webkit-scrollbar {\r\n  width: 5px;\r\n}\r\n&::-webkit-scrollbar-track {\r\n  background: #F6F7FF;\r\n}\r\n&::-webkit-scrollbar-thumb {\r\n  background: #C4C4C4;\r\n  &:hover {\r\n    background: var(--text-medium);\r\n  }\r\n}\r\n> li {\r\n  line-height: 1.7;\r\n  font-size: 14px;\r\n  display: grid;\r\n  grid-template-columns: 1fr 80px 90px;\r\n  grid-column-gap: 12px;\r\n  padding: 0.25em 1.5em;\r\n  align-items: center;\r\n  &:nth-child(odd) {\r\n    background: #F2F2F2;\r\n  }\r\n  &:nth-child(even) {\r\n    background: #FEFCFC;\r\n  }\r\n}\r\n`;\r\n\r\nexport const StopStatus = styled.span`\r\nfont-weight: bold;\r\nletter-spacing: 0.05em;\r\ntext-align: center;\r\ncolor: ${({children}) => {\r\n  switch (children) {\r\n    case '進站中':\r\n      return 'var(--secondary)';\r\n    case '末班車已過':\r\n    case '今日未營運':\r\n    case '尚未發車':\r\n      return 'var(--text-medium)';\r\n    default:\r\n      return 'var(--light)';\r\n  }\r\n}};\r\n`;\r\n\r\nexport const BusPlate = styled.span`\r\nfont-size: 12px;\r\ncolor: var(--light);\r\npadding-left: 32px;\r\nbackground: url(${icBus}) 12px center/11px no-repeat;\r\n`;\r\n\r\nexport const TabList = styled.ul`\r\ndisplay: flex;\r\nwidth: 100%;\r\n> li {\r\n  flex: 1;\r\n  padding: 0.75em 1em;\r\n  font-size: ${({size}) => size === 'small' ? '14px' : '18px'};\r\n  font-weight: bold;\r\n  background-color: #BFCDFF;\r\n  white-space: nowrap;\r\n  color: #fff;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  &.active {\r\n    background-color: var(--light);\r\n    cursor: default;\r\n  }\r\n  &:first-child {\r\n    border-top-left-radius: 16px;\r\n  }\r\n  &:last-child {\r\n    border-top-right-radius: 16px;\r\n  }\r\n}\r\n`;\r\n\r\n// Menu\r\nexport const MenuWrapper = styled.div`\r\nbox-shadow: 3px 2px 6px rgba(121, 121, 121, 0.25);\r\nbackground: var(--light);\r\ndisplay: flex;\r\njustify-content: space-between;\r\nalign-items: center;\r\n${desktopMedia(`\r\nborder-radius: 16px;\r\ndisplay: block;\r\n`)}\r\n`;\r\n\r\nexport const LinkLogo = styled(Link)`\r\npadding: 14px;\r\ndisplay: block;\r\n> img {\r\n  width: 70px;\r\n}\r\n${desktopMedia(`\r\nborder-bottom: 1px solid rgba(255, 255, 255, 0.5);\r\npadding: 40px 20px;\r\n> img {\r\n  width: 100px;\r\n}\r\n`)}\r\n`;\r\n\r\nexport const NavList = styled.ul`\r\ndisplay: flex;\r\nalign-items:center;\r\n${desktopMedia(`\r\nflex-direction: column;\r\n`)}\r\n`;\r\n\r\nexport const NavListItem = styled.li`\r\nmargin-right: 16px;\r\n${desktopMedia(`\r\nmargin-top: 38px;\r\nmargin-right: 0;\r\n`)}\r\n`;\r\n\r\nexport const MenuLink = styled(NavLink)`\r\ndisplay: flex;\r\nalign-items: center;\r\njustify-content: center;\r\nwidth: 40px;\r\nheight: 40px;\r\nborder-radius: 16px;\r\n> img {\r\n  width: 24px;\r\n}\r\n&.active, &:hover {\r\n  background-color: #2A4AC2;\r\n}\r\n${desktopMedia(`\r\nwidth: 62px;\r\nheight: 62px;\r\n> img {\r\n  width: auto;\r\n}\r\n`)}\r\n`;\r\n\r\n// Modal\r\n\r\nexport const Overlay = styled.div`\r\nposition: fixed;\r\nleft: 0;\r\ntop: 0;\r\nright: 0;\r\nbottom: 0;\r\nbackground: #486ae880;\r\nz-index: 1000;\r\n`;\r\n\r\nexport const ModalWrapper = styled.div`\r\noverflow-y: scroll;\r\nheight: 100vh;\r\nwidth: 100%;\r\ndisplay: flex;\r\nalign-items: center;\r\njustify-content: center;\r\n&::-webkit-scrollbar {\r\n  width: 0;\r\n}\r\n`;\r\n\r\nexport const Modal = styled.div`\r\nborder-radius: 16px;\r\nbackground: #fff;\r\npadding: 20px;\r\nmargin: 0 20px;\r\nwidth: 600px;\r\nposition: relative;\r\n${IconBtn} {\r\n  position: absolute;\r\n  right: 12px;\r\n  top: 12px;\r\n}\r\n${ItemTitle} {\r\n  margin-right: 1em;\r\n}\r\n${desktopMedia(`\r\npadding: 48px 36px;\r\nwidth: 1100px;\r\n`)}\r\n`;\r\n\r\nexport const MapContainer = styled.div`\r\nheight: 360px;\r\nborder-radius: 16px;\r\nmargin-top: 20px;\r\n${desktopMedia(`\r\nmargin-top: 0px;\r\n`)}\r\n`;\r\n\r\n// Quick Search\r\n\r\nexport const SearchInput = styled.input`\r\noutline: none;\r\nwidth: 100%;\r\nfont-family: inherit;\r\nbackground: url(${icSearch}) right 24px center/18px no-repeat, #ffffff;\r\nbox-shadow: 4px 4px 25px rgba(148, 148, 148, 0.25);\r\nborder-radius: 16px;\r\nborder: 0;\r\npadding: 8px 24px 8px 12px;\r\ntext-align: center;\r\ncolor: var(--text-dark);\r\n&::placeholder {\r\n  color: var(--text-medium);\r\n}\r\n${desktopMedia(`\r\nfont-size: 18px;\r\npadding: 12px 30px 12px 12px;\r\nbackground-size: 22px;\r\n`)}\r\n`\r\n\r\nexport const DropdownWrapper = styled.div`\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 100%;\r\n  ${desktopMedia(`\r\n    width: 300px;\r\n  `)}\r\n`;\r\n\r\nexport const DropdownList = styled.ul`\r\n  position: absolute;\r\n  z-index: 1001;\r\n  top: calc(100% + 16px);\r\n  box-shadow: 4px 4px 25px rgba(148, 148, 148, 0.25);\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  width: 100%;\r\n  max-height: 140px;\r\n  overflow-y: scroll;\r\n  &::-webkit-scrollbar {\r\n    width: 8px;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: ${colors.light};\r\n    border-radius: 6px;\r\n    border: 2px solid #F5F6FF;\r\n  }\r\n  &::-webkit-scrollbar-track {\r\n    background: #ffffff;\r\n    border: 2px solid #F5F6FF;\r\n  }\r\n`;\r\n\r\nexport const DropdownListItem = styled.li`\r\n font-size: 18px;\r\n padding: 12px;\r\n text-align: center;\r\n cursor: pointer;\r\n background: #fff;\r\n &:nth-child(odd) {\r\n  background: #F5F6FF;\r\n }\r\n &:hover {\r\n  background: ${colors.mainLight};\r\n }\r\n`;\r\n\r\n// Empty\r\n\r\nexport const EmptyWrapper = styled.div`\r\ntext-align: center;\r\nbackground: url(${emptyBg}) center bottom 10%/cover no-repeat;\r\nheight: 35vw;\r\nmin-height: 240px;\r\nmax-height: calc(100vh - 390px);\r\npadding: 60px 30px;\r\n`;\r\n\r\nexport const EmptyText = styled.div`\r\ncolor: #bfcdff;\r\nfont-size: 18px;\r\nletter-spacing: 0.05em;\r\n`;\r\n\r\n// Search\r\n\r\nexport const TitleWithSearch = styled.div`\r\ndisplay: flex;\r\nalign-items:center;\r\nflex-wrap: wrap;\r\njustify-content: flex-end;\r\nmargin-bottom: 16px;\r\n${DropdownWrapper} {\r\n  width: 160px;\r\n}\r\n${PageTitle} {\r\n  margin-top: 10px;\r\n}\r\n${desktopMedia(`\r\njustify-content: space-between;\r\n${PageTitle} {\r\n  order: -1;\r\n  margin-top: 0px;\r\n}\r\n${DropdownWrapper} {\r\n  width: 310px;\r\n  margin-bottom: 0px;\r\n}\r\n`)}\r\n`;\r\n\r\nexport const SearchWrapper = styled.div`\r\n${desktopMedia(`\r\nheight: calc(100vh - 200px);\r\nmin-height: 650px;\r\ndisplay:flex;\r\n`)}\r\n`;\r\n\r\nexport const SearchCol1 = styled.div`\r\nflex-basis: 380px;\r\ndisplay: flex;\r\nflex-direction: column;\r\nmargin-bottom: 28px;\r\n${desktopMedia(`\r\nmargin-right: 28px;\r\nmargin-bottom: 0px;\r\n`)}\r\n> div {\r\n  flex: 1;\r\n  max-height:calc(50% - 14px);\r\n  > div {\r\n    height: 100%;\r\n  }\r\n  &:first-child {\r\n    margin-bottom: 28px;\r\n  }\r\n}\r\n${EmptyWrapper} {\r\n  height: 100%;\r\n  min-height: 240px;\r\n  max-height: none;\r\n  padding: 40px 20px;\r\n${desktopMedia(`\r\n  min-height: auto;\r\n`)}\r\n}\r\n`;\r\n\r\nexport const SearchCol2 = styled.div`\r\nflex: 1;\r\n`;\r\n\r\nexport const ClockText = styled.div`\r\nposition: absolute;\r\nleft: 50%;\r\ntop: 30%;\r\ntransform: translate(-50%, 0);\r\nfont-size: 72px;\r\ncolor: #fff;\r\n`;\r\n\r\nexport const SearchFieldWrapper = styled.div`\r\ndisplay: flex;\r\nalign-items: center;\r\npadding: 12px 6px;\r\nposition: relative;\r\n+ div {\r\n  border-top: 1px dashed transparent;\r\n  border-image: url('${dashedBorder}') 1 1 round;\r\n}\r\n> img {\r\n  width: 20px;\r\n  margin-right: 16px;\r\n}\r\n&:after{\r\n  content: '';\r\n  border-top: 11px solid var(--text-light);\r\n  border-left: 8px solid transparent;\r\n  border-right: 8px solid transparent;\r\n  position: absolute;\r\n  top: 50%;\r\n  margin-top: -6px;\r\n  right: 32px;\r\n  z-index: 1;\r\n}\r\n${DropdownList} {\r\n  top: calc(100% - 4px);\r\n  max-height: 125px;\r\n  max-width: 230px;\r\n}\r\n${DropdownListItem} {\r\n  padding: 8px 12px;\r\n}\r\n${SearchInput} {\r\n  background: none;\r\n  box-shadow: none;\r\n  font-weight: bold;\r\n  text-align: left;\r\n  font-size: 14px;\r\n  color: var(--text-dark);\r\n  &::placeholder {\r\n    color: var(--text-light);\r\n  }\r\n}\r\n`;\r\n\r\nexport const SearchBtn = styled.button`\r\nborder-radius: 20px;\r\nbackground: var(--light);\r\ntext-align: center;\r\ncolor: #fff;\r\npadding: 0.5em 1em;\r\nfont-weight: bold;\r\nfont-size: 16px;\r\nborder: 0;\r\nwidth: 90%;\r\ndisplay: block;\r\nmargin: 1em auto 0;\r\ncursor: pointer;\r\n`;\r\n\r\nexport const RouteMap = styled.div`\r\nheight: 100%;\r\nmin-height: 360px;\r\nbox-shadow: 1px 4px 15px rgba(140, 140, 140, 0.25);\r\nborder-radius: 16px;\r\n.icon-number {\r\n  width: 24px;\r\n  height: 24px;\r\n  border-radius: 50%;\r\n  border: 2px solid #fff;\r\n  background: var(--light);\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: bold;\r\n  box-shadow: 2px 4px 4px rgba(0, 0, 0, 0.25);\r\n}\r\n.icon-bus {\r\n  padding: 6px;\r\n  border-radius: 6px;\r\n  font-size: 10px;\r\n  text-align: center;\r\n  width: 72px;\r\n  background: var(--light);\r\n  color: #fff;\r\n  > img {\r\n    display: block;\r\n    margin: 0 auto;\r\n  }\r\n}\r\n`;","import Logo from '@/images/logo.svg';\r\nimport icSearch from '@/images/ic-search.svg';\r\nimport icMapPin from '@/images/ic-map-pin.svg';\r\nimport icAlert from '@/images/ic-alert.svg';\r\nimport {MenuWrapper, LinkLogo, NavList, NavListItem, MenuLink as NavLink} from '@/style';\r\n\r\nconst Menu = () => (\r\n  <MenuWrapper>\r\n    <LinkLogo to=\"/\"><img src={Logo} /></LinkLogo>\r\n    <NavList>\r\n      <NavListItem>\r\n        <NavLink to=\"nearby\"><img src={icMapPin} /></NavLink>\r\n      </NavListItem>\r\n      <NavListItem>\r\n        <NavLink to=\"search\"><img src={icSearch} /></NavLink>\r\n      </NavListItem>\r\n      <NavListItem>\r\n        <NavLink to=\"news\"><img src={icAlert} /></NavLink>\r\n      </NavListItem>\r\n    </NavList>\r\n  </MenuWrapper>\r\n);\r\n\r\nexport default Menu;","export default __webpack_public_path__ + \"static/media/ic-point.821431dd.svg\";","export default __webpack_public_path__ + \"static/media/ic-map-marker.775b9a87.svg\";","export default __webpack_public_path__ + \"static/media/ic-site.2a56fa56.svg\";","export default __webpack_public_path__ + \"static/media/ic-bus.cd4a572c.svg\";","import React from 'react';\r\nimport axios from 'axios';\r\nimport jsSHA from \"jssha\";\r\nimport { apiRoot, auth } from \"@/const\";\r\nimport { useLocationStore } from \"@/store/locationStore\";\r\n\r\nconst checkIsMobile = () => {\r\n  if (typeof window === 'undefined') {\r\n    return true;\r\n  }\r\n  return window.innerWidth < 1024;\r\n};\r\n\r\nexport const useIsMobile = () => {\r\n  // Initialize the desktop size to an accurate value on initial state set\r\n  const [isMobileSize, setIsMobileSize] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (typeof window === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    const autoResize = () => {\r\n      setIsMobileSize(checkIsMobile());\r\n    }\r\n\r\n    window.addEventListener('resize', autoResize);\r\n\r\n    autoResize();\r\n\r\n    // Return a function to disconnect the event listener\r\n    return () => window.removeEventListener('resize', autoResize);\r\n  }, [])\r\n\r\n  return isMobileSize;\r\n};\r\n\r\nexport const useIsMobileEnv = () => {\r\n  const [isMobileEnv, setIsMobileEnv] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n      setIsMobileEnv(true);\r\n    }\r\n  }, [])\r\n\r\n  return isMobileEnv;\r\n};\r\n\r\nconst genHMAC = () => {\r\n  const GMTString = new Date().toGMTString();\r\n  const ShaObj = new jsSHA('SHA-1', 'TEXT');\r\n  ShaObj.setHMACKey(auth.key, 'TEXT');\r\n  ShaObj.update(`x-date: ${GMTString}`);\r\n  const HMAC = ShaObj.getHMAC('B64');\r\n  return { HMAC, GMTString };\r\n};\r\n\r\nexport const commonAxios = async ({\r\n  method = 'get',\r\n  url,\r\n  ...others\r\n}) => {\r\n  const { HMAC, GMTString } = genHMAC();\r\n  let responseData = null;\r\n  try {\r\n    const { data } = await axios({\r\n      method,\r\n      url: `${apiRoot}${url}&$format=JSON`,\r\n      responseType: 'json',\r\n      headers: {\r\n        Authorization: `hmac username=\"${auth.id}\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"${HMAC}\"`,\r\n        'x-date': GMTString,\r\n      },\r\n      ...others\r\n    });\r\n    responseData = data;\r\n  } catch (err) {\r\n    console.log('api error: ', err);\r\n  }\r\n  return responseData;\r\n};\r\n\r\nexport const useCurrentPosition = () => {\r\n  const { locationData, setLocationData } = useLocationStore();\r\n\r\n  const getPosition = () => {\r\n    navigator.geolocation.getCurrentPosition((res) => {\r\n      setLocationData({ lat: res.coords.latitude, lng: res.coords.longitude });\r\n    });\r\n  };\r\n\r\n  return {\r\n    locationData,\r\n    getPosition\r\n  }\r\n};","import React from 'react';\r\nimport {useNavigate} from 'react-router-dom';\r\n// import PropTypes from 'prop-types';\r\nimport { SearchInput, DropdownWrapper, DropdownList, DropdownListItem } from '@/style';\r\nimport {commonAxios} from '@/common';\r\n\r\nconst StyledSelect = () => {\r\n  const navigate = useNavigate();\r\n  const [options, setOptions] = React.useState([]);\r\n  const [showDropdown, setShowDropdown] = React.useState(false);\r\n  const inputRef = React.useRef(null);\r\n\r\n  const searchRoutes = (keyword) => {\r\n    commonAxios({\r\n      url: `/v2/Bus/Route/City/Taipei/${keyword}?$top=10`,\r\n    }).then((res) => {\r\n      setOptions(res?.map((n) => ({value: n.RouteUID, label: n.RouteName.Zh_tw})).sort((a, b) => a.label.localeCompare(b.label)));\r\n    });\r\n  };\r\n  const onChange = (e) => {\r\n    if (e.target.value) {\r\n      searchRoutes(e.target.value);\r\n    } else {\r\n      setOptions([]);\r\n    }\r\n  };\r\n  const onListSelect = (val) => {\r\n    navigate(`/search/Taipei/${val}`);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const root = document.getElementById('root');\r\n    const onOtherClick = (e) => {\r\n      if (e.target !== inputRef.current) {\r\n        setShowDropdown(false);\r\n      }\r\n    };\r\n    if (showDropdown) {\r\n      root.addEventListener('click', onOtherClick);\r\n    }\r\n    return () => {\r\n      root.removeEventListener('click', onOtherClick);\r\n    }\r\n  }, [showDropdown]);\r\n\r\n  React.useEffect(() => {\r\n    if (options.length > 0) {\r\n      setShowDropdown(true);\r\n    }\r\n  }, [options]);\r\n\r\n  return (\r\n    <DropdownWrapper>\r\n      <SearchInput ref={inputRef} type=\"text\" placeholder=\"快速搜尋\" onChange={onChange} onFocus={() => setShowDropdown(true)} />\r\n      {showDropdown && (\r\n        <DropdownList>\r\n          {options.map((opt) => <DropdownListItem key={opt.label} onClick={() => onListSelect(opt.value)}>{opt.label}</DropdownListItem>)}\r\n        </DropdownList>\r\n      )}\r\n    </DropdownWrapper>\r\n  );\r\n};\r\n\r\nexport default StyledSelect;\r\n\r\n// StyledSelect.propTypes = {\r\n//   defaultValue: PropTypes.string.isRequired,\r\n//   options: PropTypes.array.isRequired,\r\n//   onSelect: PropTypes.func.isRequired\r\n// };\r\n","import React from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport { SearchFieldWrapper, SearchInput, DropdownWrapper, DropdownList, DropdownListItem } from '@/style';\r\n\r\nconst SearchSelect = ({options, placeholder, onSelect, icon, defaultValue}) => {\r\n  const [inputValue, setInputValue] = React.useState('');\r\n  const [showDropdown, setShowDropdown] = React.useState(false);\r\n  const [filterOptions, setFilterOptions] = React.useState([]);\r\n  const inputRef = React.useRef(null);\r\n\r\n  const onChange = (e) => {\r\n    setInputValue(e.target.value);\r\n    setShowDropdown(true);\r\n    if (e.target.value) {\r\n      setFilterOptions(options.filter((n) => n.label.includes(e.target.value)));\r\n    } else {\r\n      setFilterOptions(options);\r\n    }\r\n  };\r\n\r\n  const onListClick = (option) => {\r\n    setInputValue(option.label);\r\n    onSelect(option.value);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const root = document.getElementById('root');\r\n    const onOtherClick = (e) => {\r\n      if (e.target !== inputRef.current) {\r\n        setShowDropdown(false);\r\n      }\r\n    };\r\n    if (showDropdown) {\r\n      root.addEventListener('click', onOtherClick);\r\n    }\r\n    return () => {\r\n      root.removeEventListener('click', onOtherClick);\r\n    }\r\n  }, [showDropdown]);\r\n\r\n  React.useEffect(() => {\r\n    if (options.length > 0) {\r\n      setFilterOptions(options);\r\n    }\r\n  }, [options]);\r\n\r\n  React.useEffect(() => {\r\n    if (defaultValue) {\r\n      const opt = options.find((n) => n.value === defaultValue);\r\n      setInputValue(opt?.label);\r\n    }\r\n  }, [defaultValue]);\r\n\r\n  return (\r\n    <SearchFieldWrapper>\r\n      <img src={icon} alt=\"\" />\r\n      <DropdownWrapper>\r\n        <SearchInput\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          value={inputValue}\r\n          placeholder={placeholder}\r\n          onChange={onChange}\r\n          onFocus={() => setShowDropdown(true)}\r\n          autocomplete=\"off\"\r\n        />\r\n        {showDropdown && (\r\n          <DropdownList>\r\n            {filterOptions.map((opt) => <DropdownListItem key={opt.label} onClick={() => onListClick(opt)}>{opt.label}</DropdownListItem>)}\r\n          </DropdownList>\r\n        )}\r\n      </DropdownWrapper>\r\n    </SearchFieldWrapper>\r\n  );\r\n};\r\n\r\nexport default SearchSelect;\r\n\r\n// SearchSelect.propTypes = {\r\n//   defaultValue: PropTypes.string.isRequired,\r\n//   options: PropTypes.array.isRequired,\r\n//   onSelect: PropTypes.func.isRequired\r\n// };\r\n","export default __webpack_public_path__ + \"static/media/user-marker-point.739eb71e.svg\";","export default __webpack_public_path__ + \"static/media/ic-close.4b8e8462.svg\";","export default __webpack_public_path__ + \"static/media/ic-map-marker-main.dfbf20a3.svg\";","import bus from '@/images/ic-bus-main.svg';\r\nimport { EmptyWrapper, EmptyText } from '@/style';\r\n\r\nconst Empty = ({text = '沒有資料'}) => (\r\n  <EmptyWrapper>\r\n    <EmptyText>{text}</EmptyText>\r\n  </EmptyWrapper>  \r\n);\r\n\r\nexport default Empty;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {PageTitle, TitleSplit, SecondTitle, Board, StripedList, ItemTitle, TabList, TitleWithSearch} from '@/style';\r\nimport {commonAxios, useCurrentPosition, useIsMobile} from '@/common';\r\nimport StationModal from \"@/components/StationModal\";\r\nimport QuickSearch from '@/components/QuickSearch';\r\nimport Empty from \"@/components/Empty\";\r\n\r\nconst Nearby = () => {\r\n  const [currentDistance, setCurrentDistance] = React.useState(300);\r\n  const [data, setData] = React.useState([]);\r\n  const [modalInfo, setModalInfo] = React.useState(null);\r\n  const { locationData, getPosition } = useCurrentPosition();\r\n  const isMobile = useIsMobile();\r\n\r\n  const getNearStations = ({lat, lng, distance}) => {\r\n    commonAxios({\r\n      url: `/v2/Bus/Station/NearBy?$spatialFilter=nearby(${lat},${lng},${distance})`,\r\n    }).then((res) => {\r\n      setData(res.filter((n, i, arr) => arr.findIndex((x) => x.StationID === n.StationID) === i));\r\n    });\r\n  };\r\n\r\n  const showModal = (e, info) => {\r\n    e.preventDefault();\r\n    setModalInfo(info);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalInfo(null);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    getPosition();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (locationData && currentDistance) {\r\n      getNearStations({...locationData, distance: currentDistance});\r\n    }\r\n  }, [locationData, currentDistance]);\r\n\r\n  return (\r\n    <>\r\n      <TitleWithSearch>\r\n        <QuickSearch />\r\n        <PageTitle>Bus Stop <TitleSplit /> 附近站牌</PageTitle>\r\n      </TitleWithSearch>\r\n      <Board style={{padding: isMobile ? '40px 30px' : '50px 70px', marginTop: 20}}>\r\n        <SecondTitle>附近的站牌</SecondTitle>\r\n        <TabList>\r\n          <li className={currentDistance === 300 ? 'active' : ''} onClick={() => setCurrentDistance(300)}>\r\n            300 m\r\n          </li>\r\n          <li className={currentDistance === 10 ? 'active' : ''} onClick={() => setCurrentDistance(10)}>\r\n            100 m\r\n          </li>\r\n        </TabList>\r\n        {data.length > 0 ? (\r\n          <StripedList>\r\n            {data.map((n, i) => (\r\n              <li key={n.StationUID}>\r\n                <Link to=\"#\" onClick={(e) => showModal(e, n)}>\r\n                  <ItemTitle>{n.StationName?.Zh_tw} ({n.Bearing})</ItemTitle>\r\n                  {n?.Stops?.map((s) => s?.RouteName?.Zh_tw).join(', ')}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </StripedList>\r\n          ) : <Empty text=\"附近沒有站牌\" />}\r\n      </Board>\r\n      {modalInfo && (\r\n        <StationModal data={modalInfo} close={closeModal} showUserPopup />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Nearby;","\r\nimport React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {commonAxios, useIsMobile} from '@/common';\r\nimport { cities } from '@/const';\r\nimport Empty from \"@/components/Empty\";\r\nimport SearchSelect from '@/components/SearchSelect';\r\nimport icMapMarker from '@/images/ic-map-marker.svg';\r\nimport moment from 'moment';\r\nimport icClose from \"@/images/ic-close.svg\";\r\nimport {PageTitle, TitleSplit, Board, StripedList, ItemTitle, SecondTitle,\r\n  Overlay, ModalWrapper, Modal, IconBtn, TitleWithSearch} from '@/style';\r\n\r\nconst News = () => {\r\n  const modalRef = React.useRef(null);\r\n  const [data, setData] = React.useState([]);\r\n  const [modalInfo, setModalInfo] = React.useState(null);\r\n  const [targetCity, setTargetCity] = React.useState('Taipei');\r\n  const isMobile = useIsMobile();\r\n\r\n  const getNews = (city) => {\r\n    commonAxios({\r\n      url: `/v2/Bus/News/City/${city}?$top=10`,\r\n    }).then((res) => {\r\n      setData(res);\r\n    });\r\n  };\r\n\r\n  const showModal = (e, info) => {\r\n    e.preventDefault();\r\n    setModalInfo(info);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalInfo(null);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    getNews(targetCity);\r\n  }, [targetCity]);\r\n\r\n  return (\r\n    <>\r\n      <PageTitle>Latest News <TitleSplit /> 最新消息</PageTitle>\r\n      <Board style={{padding: isMobile ? '40px 30px' : '50px 70px', marginTop: 20}}>\r\n        <TitleWithSearch style={{justifyContent: 'space-between'}}>\r\n          <SecondTitle>最新消息</SecondTitle>\r\n          <SearchSelect\r\n            options={cities.map((n) => ({label: n.name, value: n.key}))}\r\n            placeholder=\"選擇縣市\"\r\n            defaultValue={targetCity}\r\n            onSelect={(v) => setTargetCity(v)}\r\n            icon={icMapMarker}\r\n          />\r\n        </TitleWithSearch>\r\n        {data.length > 0 ? (\r\n          <StripedList>\r\n            {data.map((n, i) => (\r\n              <li key={n.StationUID}>\r\n                <Link to=\"#\" onClick={(e) => showModal(e, n)}>\r\n                  <ItemTitle>{moment(n.PublishTime).format('YYYY/MM/DD')}</ItemTitle>\r\n                  {n.Title}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </StripedList>\r\n          ) : <Empty text=\"沒有最新消息\" />}\r\n      </Board>\r\n      {modalInfo && (\r\n        <Overlay onClick={closeModal}>\r\n          <ModalWrapper style={{alignItems: modalRef.current?.offsetHeight < window.innerHeight ? 'center' : 'baseline'}}>\r\n            <Modal ref={modalRef} onClick={(e) => e.stopPropagation()} style={{width: 750}}>\r\n              <IconBtn onClick={closeModal} type=\"button\"><img src={icClose} alt=\"x\" width=\"20\" /></IconBtn>\r\n              <ItemTitle>{modalInfo.Title}</ItemTitle>\r\n              <small>{moment(modalInfo.PublishTime).format('YYYY/MM/DD HH:mm:ss')} | {modalInfo.Department}</small>\r\n              <hr />\r\n              {modalInfo.Description}\r\n            </Modal>\r\n          </ModalWrapper>\r\n        </Overlay>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default News;","import {\r\n  HashRouter as Router,\r\n  Routes,\r\n  Route,\r\n  Outlet\r\n} from \"react-router-dom\";\r\nimport { LocationContextProvider } from '@/store/locationStore';\r\nimport Menu from \"@/components/Menu\";\r\nimport Search from \"@/containers/Search\";\r\nimport Nearby from \"@/containers/Nearby\";\r\nimport News from \"@/containers/News\";\r\nimport { Container, PageWrapper } from \"./style\";\r\n\r\nconst Layout = () => (\r\n  <Container>\r\n    <Menu />\r\n    <PageWrapper>\r\n      <Outlet />\r\n    </PageWrapper>\r\n  </Container>\r\n);\r\n\r\nconst App = () => {\r\n  return (\r\n    <LocationContextProvider>\r\n      <Router>\r\n        <Routes>\r\n          <Route path=\"/\" element={<Layout />}>\r\n            <Route path=\"search\">\r\n              <Route path=\":city\" element={<Search />} />\r\n              <Route path=\":city/:route\" element={<Search />} />\r\n              <Route index element={<Search />} />\r\n            </Route>\r\n            <Route path=\"nearby\" element={<Nearby />} />\r\n            <Route path=\"news\" element={<News />} />\r\n            <Route index element={<Search />} />\r\n          </Route>\r\n          {/* <Route path=\"/*\" element={<NotFound />} /> */}\r\n        </Routes>\r\n      </Router>\r\n    </LocationContextProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}